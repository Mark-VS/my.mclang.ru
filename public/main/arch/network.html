<!DOCTYPE html>
<html lang="RU">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Сеть</title>
    <link rel="stylesheet" href="/assets/styles/style.css">
    <link rel="stylesheet" href="/assets/highlight/styles_custom/androidstudio.css">
</head>
<body>
<script src="/assets/highlight/highlight.min.js"></script>
<a href="/arch">Вернуться назад</a>

<h1>Сеть</h1>

<p style="margin-bottom: 6px">Файлы:</p>
<ul style="margin-top: 6px">
   <li>/etc/resolv.conf – DNS</li>
   <li>/etc/gai.conf – GetAddressInfo – нужен для настройки того, как система выбирает IP-адрес (IPv4 или IPv6) при подключении к хосту.</li>
   <li>/etc/nsswitch.conf – настройка порядка и способов поиска информации о системных объектах, таких как пользователи, группы, хосты, пароли и т.д. Системные функции, такие как getent, getpwnam(), gethostbyname(), используют NSS.</li>
   <li>/etc/hosts – хосты</li>
   <li>/etc/hostname – имя компьютера</li>
</ul>

<pre><code class="language-bash"># Присваиваем интерфейсу IP-адрес:
sudo ip addr add 192.168.1.3/24 dev enp2s0

# Включаем интерфейс(нужно подождать около 2 сек.):
sudo ip link set dev enp2s0 up

# локальный маршрут в таблицу маршрутизации уже добавился автоматический
# но нам нужно добавить маршрут для интернета:
sudo ip route add default via 192.168.1.1 dev enp2s0
</code></pre>

<p style="margin-bottom: 6px">Если вдруг <code style="background-color: #161616; padding: 0 6px">ping 8.8.8.8</code> работает, а <code style="background-color: #161616; padding: 0 6px">ping servername.ru</code> не работает, то может быть проблема из-за того, что система по умолчанию работает с IPv6. Проверим:</p>
<pre style="margin-top: 6px"><code class="language-bash"># Укажем явно IPv4:
ping -4 servername.ru
</code></pre>

<p>Как сделать, чтобы система по умолчанию работала с IPv4</p>
<p style="margin-bottom: 6px">Нужно открыть файл <strong><i>/etc/gai.conf</i></strong> и раскомментировать там следующую строку:</p>
<pre style="margin-top: 6px; margin-bottom: 6px"><code class="language-bash">precedence ::ffff:0:0/96  100
</code></pre>
<p style="margin-top: 6px">Теперь можно пинговать адрес и не указывать явно IPv4. Система будет по умолчанию использовать именно IPv4.</p>

<script src="/assets/highlight/languages/bash.min.js"></script>
<script>hljs.highlightAll();</script>
</body>
</html>
