<!DOCTYPE html>
<html lang="RU">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>waybar</title>
    <style>
        body {
            font-size: 16px;
            background-color: #282C34;
            color: #8AA3AD;
        }
    </style>
</head>
<body>

<h1>waybar</h1>
<pre><code>

    # –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥:
        /etc/xdg/waybar/config.jsonc
    # –õ–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥:
        ~/.config/waybar/config
        
    # –°–∫–æ–ø–∏—Ä—É–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å–µ–±–µ –≤ –¥–æ–º–∞—à–Ω—é—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:
        mkdir -p ~/.config/waybar
        cp /etc/xdg/waybar/config.jsonc ~/.config/waybar/config
        cp /etc/xdg/waybar/style.css ~/.config/waybar/
    
    ## –ß—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏ –∏–∫–æ–Ω–∫–∏ –≤ –∫–æ–Ω—Ñ–∏–≥–µ, –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —à—Ä–∏—Ñ—Ç—ã:
        sudo pacman -S ttf-nerd-fonts-symbols
        sudo pacman -S ttf-nerd-fonts-symbols-mono
        ## –ú–æ–∂–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:
            sudo pacman -S ttf-fonts-awesome
            
    ## –ß—Ç–æ–±—ã –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–∏—Å—Ç–µ–º—ã –∑–∞–ø—É—Å–∫–∞–ª—Å—è –Ω–∞—à waybar, –∞ –Ω–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π swaybar, –Ω–∞–¥–æ
        ## - –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª bar –≤ ~/.config/sway/config
        ## - –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤–º–µ—Å—Ç–æ –Ω–µ–≥–æ:
            exec_always "pgrep -x waybar || waybar"   # –µ—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å waybar —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º, –∏–Ω–∞—á–µ –∑–∞–ø—É—Å–∫–∞–µ–º –Ω–æ–≤—ã–π
           
    "modules-right": [
    "sway/language",      // —Ä–∞—Å–∫–ª–∞–¥–∫–∞
    "clock"               // –≤—Ä–µ–º—è
    ],
    "sway/language": {      // —É–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º–∞—Ç –¥–ª—è —Ä–∞—Å–∫–ª–∞–¥–∫–∏
    "format": "{}"
    }
    
    // –£ –º–µ–Ω—è –≤—ã–ª–µ–∑–∞–ª–∞ –æ—à–∏–±–∫–∞ –∏–∑ –º–æ–¥—É–ª—è "custom/media", –ø–æ—Ç–æ–º—É —á—Ç–æ –∑–∞–ø—É—Å–∫–∞–ª–∏—Å—å py-—Å–∫—Ä–∏–ø—Ç—ã, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –±—ã–ª–æ.
    // [warning] 'swap-icon-label' must be a bool. - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤—ã–ª–µ–∑–∞–µ—Ç –∏–∑-–∑–∞ –º–æ–¥—É–ª—è sway/window

    ## –ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–æ–≥–æ simple_media.py (–ø–µ—Ä–≤–∞—è –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ —Ç–æ–∂–µ –Ω—É–∂–Ω–∞!!!!!):
        #!/usr/bin/env python3
        import subprocess
        import json
        
        def get_status():
            try:
                # –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏—è –æ—Ç strawberry
                result = subprocess.run(
                    ["playerctl", "--player=strawberry", "status"],
                    capture_output=True, text=True, timeout=1
                )
                status = result.stdout.strip()
                if status == "Playing":
                    return "A"
            except Exception:
                pass
            return "üéú"
    
        print(json.dumps({"text": get_status()}))
    
    ## –ò —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, –ø—Ä–∏–º–µ—Ä –º–æ–¥—É–ª—è "custom/media" –≤ —Ñ–∞–π–ª–µ ~/.config/waybar/config, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
        "custom/media": {
        // "format": "{icon} {text}",
        //  "return-type": "json",
        //  "max-length": 40,
        //  "format-icons": {
        //     "spotify": "ÔÜº",
        //     "default": "üéú"
        //  },
        //  "escape": true
        //  "exec": "$HOME/.config/waybar/mediaplayer.py 2> /dev/null" // Script in resources folder
        // "exec": "$HOME/.config/waybar/mediaplayer.py --player spotify 2> /dev/null" // Filter player based on name
    
            "exec": "$HOME/.config/waybar/scripts/simple_media.py",
            "return-type": "json",
            "interval": 1
    
        },


    ### –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä.
    ## –¢–µ–ø–µ—Ä—å –∫–æ–≥–¥–∞ –ø–ª–µ–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω, –∑–Ω–∞—á–∫–∞ –Ω–µ—Ç. –ö–æ–≥–¥–∞ –∑–∞–ø—É—â–µ–Ω, –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –µ–≥–æ –∏–º—è. –ê –∫–æ–≥–¥–∞ –∏–≥—Ä–∞–µ—Ç, –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∑–Ω–∞—á–æ–∫ –∏–≥—Ä—ã.
    
        #!/usr/bin/env python3
        import subprocess
        import json
        
        PLAYER = "strawberry"
        
        def is_player_running():
            try:
                result = subprocess.run(
                    ["playerctl", "--list-all"],
                    capture_output=True, text=True, timeout=1
                )
                players = result.stdout.strip().splitlines()
                return PLAYER in players
            except:
                return False
        
        def get_status():
            try:
                result = subprocess.run(
                    ["playerctl", "--player=" + PLAYER, "status"],
                    capture_output=True, text=True, timeout=1
                )
                return result.stdout.strip()
            except:
                return None
        
        def main():
            if not is_player_running():
                return  # –ù–µ –≤—ã–≤–æ–¥–∏–º –Ω–∏—á–µ–≥–æ
        
            status = get_status()
            if status == "Playing":
                text = "üéú"
            else:
                text = PLAYER
        
            print(json.dumps({"text": text}))
        
        if __name__ == "__main__":
            main()
            
    ## –ú–æ–¥—É–ª—å "custom/media":
    
        "custom/media": {
        // "format": "{icon} {text}",
        //  "return-type": "json",
        //  "max-length": 40,
        //  "format-icons": {
        //     "spotify": "ÔÜº",
        //     "default": "üéú"
        //  },
        //  "escape": true
    
            "exec": "$HOME/.config/waybar/scripts/simple_media.py",
            "return-type": "json",
            "interval": 2,
            "max-length": 40,
            "format-icons": {
            "default": "üéú"
            }
        }
        
        
    ## –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä. –¢–µ–ø–µ—Ä—å –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ä–∞–∑–Ω—ã–º–∏ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞—Ç–µ–ª—è–º–∏ (–¥–ª—è DeaDBeeF –Ω—É–∂–µ–Ω –ø–ª–∞–≥–∏–Ω deadbeef-mpris2-plugin, —á—Ç–æ–±—ã playerctl –µ–≥–æ –ø–æ–Ω–∏–º–∞–ª):
        #!/usr/bin/env python3
        import subprocess
        import json
        
        def get_players():
            try:
                result = subprocess.run(
                    ["playerctl", "--list-all"],
                    capture_output=True, text=True, timeout=1
                )
                return result.stdout.strip().splitlines()
            except:
                return []
        
        def get_status(player):
            try:
                result = subprocess.run(
                    ["playerctl", "--player", player, "status"],
                    capture_output=True, text=True, timeout=1
                )
                return result.stdout.strip()
            except:
                return None
        
        def main():
            players = get_players()
            for player in players:
                status = get_status(player)
                if status == "Playing":
                    print(json.dumps({"text": "üéú"}))
                    return
                elif status in ["Paused", "Stopped"]:
                    print(json.dumps({"text": player}))
                    return
            # –ù–∏ –æ–¥–Ω–æ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–ª–µ–µ—Ä–∞
            print(json.dumps({}))
        
        if __name__ == "__main__":
            main()
            
    ## –ú–æ–¥—É–ª—å "custom/media": 
    "custom/media": {
       // "format": "{icon} {text}",
       //  "return-type": "json",
       //  "max-length": 40,
       //  "format-icons": {
       //     "spotify": "ÔÜº",
       //     "default": "üéú"
       //  },
       //  "escape": true
       //  "exec": "$HOME/.config/waybar/mediaplayer.py 2> /dev/null" // Script in resources folder
       // "exec": "$HOME/.config/waybar/mediaplayer.py --player spotify 2> /dev/null" // Filter player based on name

       "exec": "~/.config/waybar/scripts/simple_media.py",
       "interval": 2,
       "return-type": "json",
       "format": "{}",
       "on-click": "playerctl play-pause"
     },
     
     ## –¶–≤–µ—Ç–∞ –¥–ª—è –º–æ–¥—É–ª—è "cutom/media":
        #custom-media {
            background-color: #3a6e56;
            color: #0f1b14;
            min-width: 100px;
        }
        #custom-media:hover {
            color: #1f3f2f;
            background-color: #4d9970;
        }
    
    ## –¶–≤–µ—Ç–∞ –¥–ª—è –º–æ–¥—É–ª—è "pulseaudio":
        #pulseaudio:hover {
            background-color: #f1c40f;
        }
        #pulseaudio {
            background-color: #a37800;
            color: #000000;
        }
</code></pre>

</body>
</html>