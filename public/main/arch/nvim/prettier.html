<!DOCTYPE html>
<html lang="RU">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prettier</title>
    <link rel="stylesheet" href="/assets/styles/style.css">
    <link rel="stylesheet" href="/assets/highlight/styles_custom/androidstudio.css">
</head>
<body>
<script src="/assets/highlight/highlight.min.js"></script>
<a href="/arch/nvim">Вернуться назад</a>

<h1>Prettier</h1>
<p>Prettier – это внешняя CLI-утилита.</p>

<p style="margin-bottom: 6px"></p>
<pre style="margin-top: 6px"><code class="language-bash"># Ставим локально:
npm install --save-dev prettier

# или:
pnpm add -D prettier
</code></pre>

<p style="margin-bottom: 6px">Проверим:</p>
<pre style="margin-top: 6px"><code class="language-bash">npx prettier --version
</code></pre>

<p style="margin-bottom: 6px">Установим <strong>conform.nvim</strong>:</p>
<pre style="margin-top: 6px"><code class="language-lua">-- ~/.config/nvim/lua/plugins/conform.lua

return {
  "stevearc/conform.nvim",
  opts = {
    formatters_by_ft = {
      javascript = { "prettier" },
      typescript = { "prettier" },
      javascriptreact = { "prettier" },
      typescriptreact = { "prettier" },
      vue = { "prettier" },
      html = { "prettier" },
      css = { "prettier" },
      json = { "prettier" },
      yaml = { "prettier" },
      markdown = { "prettier" },
    }, 
  },
}
</code></pre>

<p style="margin-bottom: 6px">Проверяем:</p>
<pre style="margin-top: 6px; margin-bottom: 6px"><code class="language-vim">:checkhealth conform
</code></pre>

<p style="margin-top: 6px">Так как <strong>prettier</strong> установлен локально, то <code style="background-color: #161616; padding: 0 6px">:checkhealth conform</code> сработает только в папке с проектом.</p>

<p style="margin-bottom: 6px">ГПТ посоветовал ещё и вот такой кусок кода для того, чтобы <strong>Neovim</strong> увидел локальный <strong>prettier</strong>. Но у меня и без этого работает.</p>
<pre style="margin-top: 6px"><code class="language-lua">-- ~/.config/nvim/lua/plugins/conform.lua

return {
  "stevearc/conform.nvim",
  opts = {
    formatters_by_ft = {
      javascript = { "prettier" },
      typescript = { "prettier" },
      javascriptreact = { "prettier" },
      typescriptreact = { "prettier" },
      vue = { "prettier" },
      html = { "prettier" },
      css = { "prettier" },
      json = { "prettier" },
      yaml = { "prettier" },
      markdown = { "prettier" },
    },
    formatters = {
        prettier = {
            command = "npx",
	    args = { "prettier", "--stdin-filepath", "$FILENAME" },
	    stdin = true,
	},
    },
  },
}
</code></pre>


<p style="margin-bottom: 6px">Если всё в порядке, выполним:</p>
<pre style="margin-top: 6px"><code class="language-vim">:ConformInfo
</code></pre>

<p style="margin-bottom: 6px">Отформатировать код:</p>
<pre style="margin-top: 6px"><code class="language-vim">:lua require("conform").format()
</code></pre>

<p style="margin-bottom: 6px">Как добавить команду <code style="background-color: #161616; padding: 0 6px">:Format</code> и горячие клавиши для форматирования? Для этого добавим <strong><i>config</i></strong> в <strong><i>conform.lua</i></strong>:</p>
<pre style="margin-top: 6px"><code class="language-lua">-- ~/.config/nvim/lua/plugins/conform.lua
return {
  "stevearc/conform.nvim",
  opts = {
    formatters_by_ft = {
      javascript = { "prettier" },
      typescript = { "prettier" },
      javascriptreact = { "prettier" },
      typescriptreact = { "prettier" },
      vue = { "prettier" },
      html = { "prettier" },
      css = { "prettier" },
      json = { "prettier" },
      yaml = { "prettier" },
      markdown = { "prettier" },
    },
  },
  config = function(_, opts)
    require("conform").setup(opts)

    -- Добавляем команду :Format
    vim.api.nvim_create_user_command("Format", function()
      require("conform").format()
    end, {})
    
    -- Добавляем &lt;leader&gt;f
    vim.keymap.set({ "n", "v" }, "<leader>f", function()
      require("conform").format()
    end, { desc = "Format file or selection" })
  end
}
</code></pre>




<p style="margin-bottom: 6px"></p>
<pre style="margin-top: 6px"><code class="language-lua">

</code></pre>


<script src="/assets/highlight/languages/bash.min.js"></script>
<script src="/assets/highlight/languages/lua.min.js"></script>
<script src="/assets/highlight/languages/vim.min.js"></script>
<script>hljs.highlightAll();</script>
</body>
</html>
